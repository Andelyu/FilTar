---
layout: default
---
<body>

<h1>Dependencies</h1>

<ol>

<li><b>Conda:</b> The tool is a snakemake project and it is therefore essential that the conda package manager is installed on your system. The easiest way to do this is to obtain conda through the relatively lightweight miniconda python distribution, which only contains conda and its dependencies <a href="https://conda.io/docs/user-guide/install/index.html">Installation Instructions</a>.</li></br>

<li><b>Snakemake:</b> <a href="https://snakemake.readthedocs.io/en/stable/getting_started/installation.html">Snakemake</a> can be installed using conda essily with the following command:

<code>conda install -c bioconda -c conda-forge snakemake</code>
</li></br>

<li>filtar (R package): The filtar R package also exists to perform a series of data manipulations within the main FilTar workflow. It can be installed via use of the devtools R package with the following command within the R console:

<code>devtools::install_github('TBradley27/filtar')</code>
</li>

<li>perl modules: It is not recommended to install perls module using conda*. The recommended method of installing perl modules for us with filtar is to install cpanm perl package manager, and then to manually install perl modules using cpanm. cpanm can itself be installed using conda:

<code>conda install -c bioconda perl-app-cpanminus</code>

Two perl modules are needed to correctly execute targetscan7 - Bio::TreeIO and Statistics::Lite. They can be installed as follows:

<code>cpanm Bio::Perl</code>
<code>cpanm Statistics::Lite</code>

* This is because conda installs perl modules in different non-interacting directories using different installations of perl, making them very difficult if not possible to use together.
</li>
<li>Other: For the remaining dependencies, the user has the choice of the following two options:

a)  To allow dependencies to be managed within the snakemake workflow. If the '--use-conda' flag (see later) is used when executing snakemake, then snakemake will use conda to download and/or activate environments containing dependencies needed to execute a given rule (i.e. job within the larger workflow). That environment will then be reactivated whenever that same rule is executed.

For example, is the '--use-conda' flag is used, filtar will download and install HISAT2 and run withins its own self-contained conda environment. The dependency would be installed within conda, so root priviliges would not be needed.

b) The user can manage their own dependencies outside of the filtar workflow. If the '--use-conda' flag is not used, then filtar will try and find HISAT2 within the current environment using the PATH environment variable.
</li>
</ol>

Note 1: Option a) may cause problems on systems such as some HPC environments in which data download is uncoupled from intensive data processing. In which case option b) may be preferable

Note 2: For more flexibility if users would like filtar to manage some dependencies internally (e.g. HISAT2) and some dependencies externally (e.g. trim galore) they could edit the relevant Snakefile and comment out the 'conda' directive from the relevant rule.
In this case, that rule's dependencies would not be managed internally by filtar even when the '--use-conda' flag is used when executing the 'snakemake' command

</body>		
